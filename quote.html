<!-- Quote Form Popup -->
<div class="popup-overlay" id="quotePopup">
  <div class="popup-box">
    <i class="fas fa-solar-panel"></i>
    <h3>üì© Get Your Free Quote!</h3>
    <form id="quoteForm" action="https://formspree.io/f/xqadgpnp" method="POST">
      <label for="qname">Your Name</label>
      <input type="text" id="qname" name="name" placeholder="Enter your name" required>

      <label for="qmobile">Your Mobile No.</label>
      <input type="mobile" id="qmobile" name="mobile" placeholder="Enter your mobile no." required>

      <label for="qmessage">Your Message</label>
      <textarea id="qmessage" name="message" rows="5" placeholder="Write your message" required></textarea>

      <div class="popup-buttons">
        <button type="submit">Send Quote Request</button>
        <button type="button" id="quoteCloseBtn">Close</button>
      </div>
    </form>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const quoteBtn = document.getElementById('quoteBtn');
  const quotePopup = document.getElementById('quotePopup');
  const quoteCloseBtn = document.getElementById('quoteCloseBtn');
  const quoteForm = document.getElementById('quoteForm');

  // Hide popup initially
  quotePopup.style.display = 'none';

  // Open popup on button click
  quoteBtn.addEventListener('click', () => {
    quotePopup.style.display = 'flex';
  });

  // Close button
  quoteCloseBtn.addEventListener('click', () => {
    quotePopup.style.display = 'none';
  });

  // AJAX submit
  quoteForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(quoteForm);

    try {
      const response = await fetch(quoteForm.action, {
        method: 'POST',
        body: formData,
        headers: { 'Accept': 'application/json' }
      });

      if (response.ok) {
        quoteForm.reset();
        alert("‚úÖ Your quote request has been sent successfully!");
        quotePopup.style.display = 'none';
      } else {
        const data = await response.json();
        alert(data.error || "‚ö†Ô∏è Something went wrong. Please try again.");
      }
    } catch (err) {
      alert("‚ö†Ô∏è Something went wrong. Please try again.");
    }
  });
});
</script>